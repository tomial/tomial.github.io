<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Git Submodule使用总结 - Tomial's Blog</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:image" content><meta property="og:title" content="Git Submodule使用总结"><meta property="og:description" content="我在将博客源码上传到Github时遇到这样一个问题："><meta property="og:type" content="article"><meta property="og:url" content="https://tomial.github.io/posts/git-submodule%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-10T17:41:08+08:00"><meta property="article:modified_time" content="2021-03-10T17:41:08+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git Submodule使用总结"><meta name=twitter:description content="我在将博客源码上传到Github时遇到这样一个问题："><script src=https://tomial.github.io/js/feather.min.js></script><link href=https://tomial.github.io/css/fonts.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://tomial.github.io/css/main.css><link rel=stylesheet type=text/css href=https://tomial.github.io/css/dark.css></head><body><div class=content><header><div class=main><a href=https://tomial.github.io/>Tomial's Blog</a></div><nav><a href=/>主页</a>
<a href=/posts>全部文章</a>
<a href=/tags>标签</a>
<a href=/about>关于</a></nav></header><main><article><div class=title><h1 class=title>Git Submodule使用总结</h1><div class=meta style=margin-bottom:3em>最后编辑于 2021-03-10</div></div><section class=body><p>我在将博客源码上传到Github时遇到这样一个问题：</p><p>hugo使用的主题是作者发布在github上的，我将主题fork之后作了一些修改。可以发现主题相当于另一个项目，可以单独修改和push，很符合git submodule的使用情景，所以hugo在文档里添加主题的地方都使用了git的submodule。但submodule在windows里使用有一些坑，在这篇博客里记录一下</p><hr><p>一开始尝试多个主题，后面需要删除很多submodule，将submodule删除干净的方法如下：</p><ol><li>删除包含该submodule的文件夹</li><li><code>git submodule deinit -f -- a/submodule</code></li><li>删除<code>.git/modules</code>里面的对应的submodule</li><li><code>git rm -f path/to/submodule</code></li><li>删除在<code>.git/config</code>里面对应的内容</li><li>删除该submodule在<code>.gitmodules</code>里对应的内容</li></ol><hr><p>添加submodule的方法：<code>git submodule add &lt;URL> &lt;Path></code></p><blockquote><p><em>fatal: No url found for submodule path &rsquo;themes/archie&rsquo; in .gitmodules</em> 解决方法</p></blockquote><p>推测是跟windows路径格式有关，将<code>.gitmodules</code>的路径格式改为：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#06b6ef>submodule</span> <span style=color:#48b685>&#34;themes/archie&#34;</span>]
</span></span><span style=display:flex><span>	<span style=color:#06b6ef>path</span> = <span style=color:#06b6ef>themes</span><span style=color:#ef6155>/</span><span style=color:#06b6ef>archie</span>
</span></span><span style=display:flex><span>	<span style=color:#06b6ef>url</span> = <span style=color:#06b6ef>https</span><span style=color:#ef6155>://</span><span style=color:#06b6ef>github</span>.<span style=color:#06b6ef>com</span><span style=color:#ef6155>/</span><span style=color:#06b6ef>tomial</span><span style=color:#ef6155>/</span><span style=color:#06b6ef>archie</span>.<span style=color:#06b6ef>git</span>
</span></span></code></pre></td></tr></table></div></div><p>clone项目时先clone主项目，这时候submodule目录是空的，再运行：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>git submodule init
</span></span><span style=display:flex><span>git submodule update
</span></span></code></pre></td></tr></table></div></div><p>即可把submodule的内容拉下来</p><hr><p>参考资料：</p><p><a href=https://stackoverflow.com/questions/1260748/how-do-i-remove-a-submodule>How do I remove a submodule?</a></p><p><a href=https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97>Git - 子模块</a></p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/git>git</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/tomial title=Github><i data-feather=github></i></a>|⚡️
2024 © Tomial | Modified <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>