<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>更高效的取余运算 - Tomial's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:image" content><meta property="og:title" content="更高效的取余运算"><meta property="og:description" content="平常的取余一般用%运算符，在学习ArrayDeque时发现其使用了另一种取余方法： elements[head = (head - 1) & (elements.length - 1)] = e; 其中head是该双向队列的头部下标，"><meta property="og:type" content="article"><meta property="og:url" content="https://tomial.github.io/posts/%E6%9B%B4%E9%AB%98%E6%95%88%E7%9A%84%E5%8F%96%E4%BD%99%E8%BF%90%E7%AE%97/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-08-12T12:30:57+00:00"><meta property="article:modified_time" content="2019-08-12T12:30:57+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="更高效的取余运算"><meta name=twitter:description content="平常的取余一般用%运算符，在学习ArrayDeque时发现其使用了另一种取余方法： elements[head = (head - 1) & (elements.length - 1)] = e; 其中head是该双向队列的头部下标，"><script src=https://tomial.github.iojs/feather.min.js></script><link href=https://tomial.github.iocss/fonts.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://tomial.github.iocss/main.css></head><body><div class=content><header><div class=main><a href=https://tomial.github.io>Tomial's Blog</a></div><nav><a href=/>主页</a>
<a href=/posts>全部文章</a>
<a href=/tags>标签</a>
<a href=/about>关于</a></nav></header><main><article><div class=title><h1 class=title>更高效的取余运算</h1><div class=meta style=margin-bottom:3em>最后编辑于 2019-08-12</div></div><section class=body><p>平常的取余一般用<code>%</code>运算符，在学习<code>ArrayDeque</code>时发现其使用了另一种取余方法：</p><p><code>elements[head = (head - 1) & (elements.length - 1)] = e;</code></p><p>其中<code>head</code>是该双向队列的头部下标，这段代码既可以解决下标为负的情况又可以起到取余的作用，其中<code>(head - 1) & (elements.length - 1)</code>起到了对<code>elements.length</code> 取余的作用。</p><p>即<code>a % b == a & (b-1)</code>，这个式子成立需要满足条件<code>b == 2^n</code>，即<code>a % b == a ^ (2^n - 1)</code>。</p><p>由于位运算是直接在内存中进行的，故比使用<code>%</code>性能更好。</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/java>Java</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/tomial title=Github><i data-feather=github></i></a>|⚡️
2021 © Tomial | Modified <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>