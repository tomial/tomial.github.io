<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>使用vsftpd建立FTP服务器 - Tomial's Blog</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:image" content><meta property="og:title" content="使用vsftpd建立FTP服务器"><meta property="og:description" content="VSFTPD是一个FTP服务器软件，官网的介绍是： Probably the most secure and fastest FTP server for UNIX-like systems. 一般在Linux建立FTP服务器都用他，首先要安装vsftpd： de"><meta property="og:type" content="article"><meta property="og:url" content="https://tomial.github.io/posts/%E4%BD%BF%E7%94%A8vsftpd%E5%BB%BA%E7%AB%8Bftp%E6%9C%8D%E5%8A%A1%E5%99%A8/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-06-23T18:10:45+00:00"><meta property="article:modified_time" content="2020-06-23T18:10:45+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="使用vsftpd建立FTP服务器"><meta name=twitter:description content="VSFTPD是一个FTP服务器软件，官网的介绍是： Probably the most secure and fastest FTP server for UNIX-like systems. 一般在Linux建立FTP服务器都用他，首先要安装vsftpd： de"><script src=https://tomial.github.io/js/feather.min.js></script><link href=https://tomial.github.io/css/fonts.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://tomial.github.io/css/main.css><link rel=stylesheet type=text/css href=https://tomial.github.io/css/dark.css></head><body><div class=content><header><div class=main><a href=https://tomial.github.io/>Tomial's Blog</a></div><nav><a href=/>主页</a>
<a href=/posts>全部文章</a>
<a href=/tags>标签</a>
<a href=/about>关于</a></nav></header><main><article><div class=title><h1 class=title>使用vsftpd建立FTP服务器</h1><div class=meta style=margin-bottom:3em>最后编辑于 2020-06-23</div></div><section class=body><p>VSFTPD是一个FTP服务器软件，官网的介绍是：</p><blockquote><p><strong>Probably the most secure and fastest FTP server for UNIX-like systems.</strong></p></blockquote><p>一般在Linux建立FTP服务器都用他，首先要安装vsftpd：</p><p>debian系：</p><p><code>sudo apt install vsftpd</code></p><p>arch系：</p><p><code>sudo pacman -S vsftpd</code></p><p>可以使用man查看配置说明：</p><p><code>man vsftpd.conf</code></p><p>网上很多过时的文章说配置文件是<code>/etc/vsftpd/vsftpd.conf</code>，但现在的配置文件是/etc/vsftpd.conf，只要用man看看说明就知道了，说明里有指出配置文件的路径。</p><p>首先使用编辑器修改配置文件：</p><p><code>sudo vi /etc/vsftpd.conf</code></p><p>找到以下的项目并修改：</p><p>允许本地用户登录：</p><p><code>local_enable=YES</code></p><p>允许写操作：</p><p><code>write_enable=YES</code></p><p>下面三项设置控制用户能否离开默认目录：</p><p><code>chroot_local_user=YES</code>若为YES则下面的list里指定的用户能离开默认目录</p><p><code>chroot_list_enable=YES</code>若为NO则上面即使是YES也无效，因为等效于没有指定哪些用户可以离开。</p><p><code>chroot_list_file=/etc/vsftpd.chroot_list</code>指定用户的列表路径</p><p>是否显示隐藏文件：</p><p><code>force_dot_files=YES</code></p><p>修改好后保存配置文件，并重启vsftpd服务：</p><p><code>sudo systemctl restart vsftpd</code></p><p>添加用于访问的用户：</p><p><code>useradd &lt;username></code></p><p>设置密码：</p><p><code>sudo passwd &lt;username></code></p><p>默认的root路径是<code>/home/$USER/</code></p><p>所以要在/home目录里面创建一个跟同名的文件夹：</p><p><code>sudo mkdir &lt;username></code></p><p>更改文件夹的权限：</p><p><code>sudo chmod 755 &lt;username></code></p><p>还要更改文件夹的所有者：</p><p><code>chown -R &lt;username> /home/&lt;username></code></p><p>到这里就可以使用filezilla等客户端访问这个FTP服务器并传输文件了</p><p>安装filezilla之后，打开软件</p><p>去到文件-站点管理器：</p><p><img src=/images/filezilla.png alt=filezilla></p><p>填入你的服务器地址和用户名点击连接就可以访问建立的服务器了，可以直接拖拽来传输文件。</p><p>要注意的是服务器接收的软件可能你的默认用户没有权限访问，这是因为没有这些文件的读写权限，可以使用<code>chmod 644 &lt;filename></code>来改变文件的权限，或者配合<code>find</code>来批量修改</p><p>参考资料：</p><p><a href=https://segmentfault.com/a/1190000016376962>使用vsftpd 搭建ftp 服务器</a></p><p><a href=https://unix.stackexchange.com/questions/39466/vsftpd-553-could-not-create-file-permissions>VSFTPD, 553 Could not create file. - permissions?</a></p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/ftp>FTP</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/tomial title=Github><i data-feather=github></i></a>|⚡️
2024 © Tomial | Modified <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>