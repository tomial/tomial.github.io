<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Iterable和Iterator - Tomial's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:image" content><meta property="og:title" content="Iterable和Iterator"><meta property="og:description" content="Iterator和Iterable的内部实现 iterator为Java中的迭代器对象，是能够对List这样的集合进行迭代遍历的底层依赖。而i"><meta property="og:type" content="article"><meta property="og:url" content="https://tomial.github.io/posts/iterable%E5%92%8Citerator/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-04-09T22:27:12+00:00"><meta property="article:modified_time" content="2019-04-09T22:27:12+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Iterable和Iterator"><meta name=twitter:description content="Iterator和Iterable的内部实现 iterator为Java中的迭代器对象，是能够对List这样的集合进行迭代遍历的底层依赖。而i"><script src=https://tomial.github.iojs/feather.min.js></script><link href=https://tomial.github.iocss/fonts.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://tomial.github.iocss/main.css></head><body><div class=content><header><div class=main><a href=https://tomial.github.io>Tomial's Blog</a></div><nav><a href=/>主页</a>
<a href=/posts>全部文章</a>
<a href=/tags>标签</a>
<a href=/about>关于</a></nav></header><main><article><div class=title><h1 class=title>Iterable和Iterator</h1><div class=meta style=margin-bottom:3em>最后编辑于 2019-04-09</div></div><section class=body><h2 id=iterator和iterable的内部实现>Iterator和Iterable的内部实现</h2><p><code>iterator</code>为Java中的迭代器对象，是<strong>能够对List这样的集合进行迭代遍历的底层依赖</strong>。而<code>iterable</code>接口里<code>定义了返回iterator的方法，相当于对iterator的封装，实现了iterable接口的类可以支持for each循环。</code></p><p><code>Iterator</code>接口主要方法如下：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#815ba4>public</span> <span style=color:#815ba4>interface</span> <span style=color:#fec418>Iterator</span><span style=color:#5bc4bf>&lt;</span>E<span style=color:#5bc4bf>&gt;</span> <span style=color:#5bc4bf>{</span>
    <span style=color:#fec418>boolean</span> <span style=color:#06b6ef>hasNext</span><span style=color:#5bc4bf>();</span>
    E <span style=color:#06b6ef>next</span><span style=color:#5bc4bf>();</span>
<span style=color:#5bc4bf>}</span>
</code></pre></td></tr></table></div></div><p><code>Iterator</code>接口定义了<code>boolean hasNExt()</code>和<code>E next()</code>两个方法，而迭代的方式则<strong>取决于实现Iterator接口的方法中具体的实现</strong>。</p><p><code>Iterable</code>接口的定义如下：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#815ba4>public</span> <span style=color:#815ba4>interface</span> <span style=color:#fec418>Iterable</span><span style=color:#5bc4bf>&lt;</span>T<span style=color:#5bc4bf>&gt;</span> <span style=color:#5bc4bf>{</span>
    Iterator<span style=color:#5bc4bf>&lt;</span>T<span style=color:#5bc4bf>&gt;</span> <span style=color:#06b6ef>iterator</span><span style=color:#5bc4bf>();</span>
<span style=color:#5bc4bf>}</span>
</code></pre></td></tr></table></div></div><p><code>List</code>中<strong>实现了Iterable</strong>接口，所以可以调用<code>Iterator</code>中的<code>hasNext()</code>方法进行迭代</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java>Iterator it <span style=color:#5bc4bf>=</span> list<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>iterator</span><span style=color:#5bc4bf>();</span>
<span style=color:#815ba4>while</span> <span style=color:#5bc4bf>(</span>it<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>hasNext</span><span style=color:#5bc4bf>())</span> <span style=color:#5bc4bf>{</span>
    System<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>out</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>print</span><span style=color:#5bc4bf>(</span>it<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>next</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>+</span> <span style=color:#48b685>&#34;,&#34;</span><span style=color:#5bc4bf>);</span>
<span style=color:#5bc4bf>}</span>
</code></pre></td></tr></table></div></div><p>也可以使用foreach循环进行迭代**(使用foreach需要实现Iterable接口)**</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#815ba4>for</span> <span style=color:#5bc4bf>(</span>Element element <span style=color:#5bc4bf>:</span> it<span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>{</span>
    System<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>out</span><span style=color:#5bc4bf>.</span><span style=color:#06b6ef>print</span><span style=color:#5bc4bf>(</span>element <span style=color:#5bc4bf>+</span> <span style=color:#ef6155>&#34;</span> <span style=color:#5bc4bf>);</span>
<span style=color:#5bc4bf>}</span>
</code></pre></td></tr></table></div></div><h2 id=foreach实现原理>foreach实现原理</h2><p>java docs里面提到了foreach的实现，称之为The enhanced<code>for </code>statement(增强型for循环)</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#815ba4>for</span> <span style=color:#5bc4bf>(</span>I <span style=color:#ef6155>#</span>i <span style=color:#5bc4bf>=</span> Expression<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>iterator</span><span style=color:#5bc4bf>();</span> <span style=color:#ef6155>#</span>i<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>hasNext</span><span style=color:#5bc4bf>();</span> <span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>{</span>
    
	<span style=color:#5bc4bf>{</span>VariableModifier<span style=color:#5bc4bf>}</span> TargetType Identifier <span style=color:#5bc4bf>=</span> <span style=color:#5bc4bf>(</span>TargetType<span style=color:#5bc4bf>)</span> <span style=color:#ef6155>#</span>i<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>next</span><span style=color:#5bc4bf>();</span>
    
	Statement
<span style=color:#5bc4bf>}</span>
</code></pre></td></tr></table></div></div><ul><li><code>#i</code> is an automatically generated identifier that is distinct from any other identifiers (automatically generated or otherwise) that are in scope (<a href=https://docs.oracle.com/javase/specs/jls/se8/html/jls-6.html#jls-6.3>§6.3</a>) at the point where the enhanced <code>for</code> statement occurs.</li></ul><p><code>#i</code>是 一个自动生成的标识符，它和其他任何(自动生成之类的)标识符都不一样，<code>#i</code>会在foreach循环调用时在特定的作用域生成。</p><ul><li>If the declared type of the local variable in the header of the enhanced <code>for</code> statement is a reference type, then <em>TargetType</em> is that declared type; otherwise, <em>TargetType</em> is the upper bound of the capture conversion (<a href=https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.1.10>§5.1.10</a>) of the type argument of I, or <code>Object</code> if I is raw.</li></ul><p>如果在foreach循环条件里传入了已经声明了类型的的本地变量，而且这个变量的类型是一个引用类型，那么<code>TargetType</code>就会变成这个变量的类型；否则，<code>TargetType</code>是<code>I</code>的一个上界，或者当<code>I</code>是原始类型<code>比如(T A)</code>时，这个变量的类型就为<code>Object</code>.</p><p>比如下面的例子：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java>List<span style=color:#5bc4bf>&lt;?</span> <span style=color:#815ba4>extends</span> Integer<span style=color:#5bc4bf>&gt;</span> l <span style=color:#5bc4bf>=</span> <span style=color:#5bc4bf>...</span>
<span style=color:#815ba4>for</span> <span style=color:#5bc4bf>(</span><span style=color:#fec418>float</span> i <span style=color:#5bc4bf>:</span> l<span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>...</span>
</code></pre></td></tr></table></div></div><p>这段代码会被翻译为</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#815ba4>for</span> <span style=color:#5bc4bf>(</span>Iterator<span style=color:#5bc4bf>&lt;</span>Integer<span style=color:#5bc4bf>&gt;</span> <span style=color:#ef6155>#</span>i <span style=color:#5bc4bf>=</span> l<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>iterator</span><span style=color:#5bc4bf>();</span> <span style=color:#ef6155>#</span>i<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>hasNext</span><span style=color:#5bc4bf>();</span> <span style=color:#5bc4bf>)</span>  <span style=color:#5bc4bf>{</span>
<span style=color:#fec418>float</span> <span style=color:#ef6155>#</span>i0 <span style=color:#5bc4bf>=</span> <span style=color:#5bc4bf>(</span>Integer<span style=color:#5bc4bf>)</span><span style=color:#ef6155>#</span>i<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>next</span><span style=color:#5bc4bf>();</span>

  <span style=color:#5bc4bf>...</span>

</code></pre></td></tr></table></div></div><p>可见Java的foreach循环是依赖于<code>Iterator</code>迭代器接口实现的，foreach循环的实现调用了其中的<code>iterator()</code>、<code>hasNext()</code>和<code>next()</code>方法</p><h2 id=iterator和iterable的关系>Iterator和Iterable的关系</h2><p>之所以要将<code>Iterator</code>再封装一层形成<code>Iterable</code>接口，是因为这样做可以使实现了<code>Iterable</code>的类内部再定义多个<code>Iterator</code>内部类，从而达到不同遍历方法的目的。例如<code>LinkedList</code>中的<code>ListIterator</code>和<code>DescendingIterator</code>两个内部类，就分别实现了双向遍历和逆序遍历。通过返回不同的<code>Iterator</code>实现不同的遍历方式，这样更加灵活。如果把两个接口合并，就没法返回不同的<code>Iterator</code>实现类了。</p><p><code>ListIterator</code>的实现如下：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#815ba4>public</span> ListIterator<span style=color:#5bc4bf>&lt;</span>E<span style=color:#5bc4bf>&gt;</span> <span style=color:#06b6ef>listIterator</span><span style=color:#5bc4bf>(</span><span style=color:#fec418>int</span> index<span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>{</span>
	checkPositionIndex<span style=color:#5bc4bf>(</span>index<span style=color:#5bc4bf>);</span>
	<span style=color:#815ba4>return</span> <span style=color:#815ba4>new</span> ListItr<span style=color:#5bc4bf>(</span>index<span style=color:#5bc4bf>);</span>
<span style=color:#5bc4bf>}</span>
 
 <span style=color:#815ba4>private</span> <span style=color:#815ba4>class</span> <span style=color:#fec418>ListItr</span> <span style=color:#815ba4>implements</span> ListIterator<span style=color:#5bc4bf>&lt;</span>E<span style=color:#5bc4bf>&gt;</span> <span style=color:#5bc4bf>{</span>
 <span style=color:#5bc4bf>...</span>
     
 ListItr<span style=color:#5bc4bf>(</span><span style=color:#fec418>int</span> index<span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>{</span>
 	<span style=color:#776e71>// assert isPositionIndex(index);
</span><span style=color:#776e71></span> 	next <span style=color:#5bc4bf>=</span> <span style=color:#5bc4bf>(</span>index <span style=color:#5bc4bf>==</span> size<span style=color:#5bc4bf>)</span> <span style=color:#5bc4bf>?</span> <span style=color:#815ba4>null</span> <span style=color:#5bc4bf>:</span> node<span style=color:#5bc4bf>(</span>index<span style=color:#5bc4bf>);</span>
 	nextIndex <span style=color:#5bc4bf>=</span> index<span style=color:#5bc4bf>;</span>
 <span style=color:#5bc4bf>}</span>
     
 <span style=color:#815ba4>public</span> <span style=color:#fec418>boolean</span> <span style=color:#06b6ef>hasNext</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>{</span> 
 	<span style=color:#815ba4>return</span> <span style=color:#5bc4bf>(</span>nextIndex <span style=color:#5bc4bf>&lt;</span> size<span style=color:#5bc4bf>);</span>
 <span style=color:#5bc4bf>}</span>
     
 <span style=color:#5bc4bf>...</span>
</code></pre></td></tr></table></div></div><p><code>DescendingIterator</code>源码如下：</p><div class=highlight><div style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java>    <span style=color:#815ba4>public</span> Iterator<span style=color:#5bc4bf>&lt;</span>E<span style=color:#5bc4bf>&gt;</span> <span style=color:#06b6ef>descendingIterator</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>{</span>
        <span style=color:#815ba4>return</span> <span style=color:#815ba4>new</span> DescendingIterator<span style=color:#5bc4bf>();</span>
    <span style=color:#5bc4bf>}</span>

    <span style=color:#815ba4>private</span> <span style=color:#815ba4>class</span> <span style=color:#fec418>DescendingIterator</span> <span style=color:#815ba4>implements</span> Iterator<span style=color:#5bc4bf>&lt;</span>E<span style=color:#5bc4bf>&gt;</span>     <span style=color:#5bc4bf>{</span>
        
        <span style=color:#815ba4>private</span> <span style=color:#815ba4>final</span> ListItr itr <span style=color:#5bc4bf>=</span> <span style=color:#815ba4>new</span> ListItr<span style=color:#5bc4bf>(</span>size<span style=color:#5bc4bf>());</span>
        
        <span style=color:#815ba4>public</span> <span style=color:#fec418>boolean</span> <span style=color:#06b6ef>hasNext</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>{</span>
            <span style=color:#815ba4>return</span> itr<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>hasPrevious</span><span style=color:#5bc4bf>();</span>
        <span style=color:#5bc4bf>}</span>
        
        <span style=color:#815ba4>public</span> E <span style=color:#06b6ef>next</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>{</span>
            <span style=color:#815ba4>return</span> itr<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>previous</span><span style=color:#5bc4bf>();</span>
        <span style=color:#5bc4bf>}</span>
        
        <span style=color:#815ba4>public</span> <span style=color:#fec418>void</span> <span style=color:#06b6ef>remove</span><span style=color:#5bc4bf>()</span> <span style=color:#5bc4bf>{</span>
            itr<span style=color:#5bc4bf>.</span><span style=color:#06b6ef>remove</span><span style=color:#5bc4bf>();</span>
        <span style=color:#5bc4bf>}</span>
    <span style=color:#5bc4bf>}</span>
</code></pre></td></tr></table></div></div><p>可见，<code>ListIterator()</code>返回的是<code>ListItr</code>对象，而<code>descendingIterator()</code>返回的是<code>DescendingIterator</code>对象，这两个对象都实现了<code>Iterator</code>接口，从而实现了顺序不同的遍历。</p><p>参考资料：</p><p><a href=https://www.cnblogs.com/litexy/p/9744241.html>Java中的Iterable与Iterator详解</a></p><p><a href=https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.2>Java docs 14.14.2. The enhanced <code>for</code> statement</a></p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/java>Java</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/tomial title=Github><i data-feather=github></i></a>|⚡️
2021 © Tomial | Modified <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>